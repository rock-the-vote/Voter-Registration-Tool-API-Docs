<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Rocky RESTful API Version 3.0</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://wiki.rockthevote.com/Main_Page' target='_blank'>Visit our wiki</a></li>
          <li><a href='https://www.rockthevote.com/get-involved/register-voters/' target='_blank'>Sign up for a free tool</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">

<h1 id="overview">Rocky Overview</h1>

<p>"Rocky" is Rock the Vote's web application that provides a web user interface that U.S. citizens can use for assistance in preparing a voter registration application document that is complete and correct for all Federal and state­ specific requirements, and therefore should be accepted in most cases by the election officials to whom the user submits the completed, printed, signed form.</p>

<p>This specification defines an application programming interface that provides exactly the same functions as the Rocky web UI, but intended for a complementary purpose: use by other web applications that have or collect personal info via their own web UI, and which rely on the Rocky back­end for data validation, error reporting (particularly for state­ specific conditions), PDF generation, and data storage. Via this API, Rocky provides a web service to service clients (web applications that use this API to interact with Rocky) that are software operated by Rocky &ldquo;partner organizations&rdquo;.</p>

<p>Partner organizations also have access to aggregated data and reporting. These are provided by the Rocky Web UI in two ways partner organization staff can use to obtain statistics and summary information: a CSV file download provides aggregated registration data for all the registrations done via that partner; and a summary web page provides statistics about this partner­specific aggregated data set. This API provides analogous bulk data extraction, with the &ldquo;partner_registrations&rdquo; interface that returns the same data as is provided in the web UI CSV file download.</p>

<p>The primary interface is this API is the &ldquo;registrations&rdquo; interface, in which callers provide all the personal data needed to create a person’s voter registration application form. Rocky checks the validity of each field, including state­ specific validation rules. If there are errors, Rocky returns to the caller a set of error reporting on individual fields of personal data. If there are no errors, Rocky returns the URL of a PDF file that contains the validated information, properly formatted as a voter registration request form.</p>

<p>This API also includes an optional interface &ldquo;state_requirements,&rdquo; used to pre­check the user data based on location and date of birth. One intended use of the pre­check function is for cases where service clients that already know the user’s location, and perhaps also DOB. In such cases, the service client can find out from Rocky whether a user is ineligible, and if so, not even begin the web UI dialogues with the user to obtain personal information. Location ineligibility is the result of states that do not allow voter registration by mail, or do not accept Rocky­generated forms for some other reason. DOB is used to determine age ineligibility in the user’s state.</p>

<p>When the user is not ineligible based on location or DOB, &ldquo;state_requirements&rdquo; returns several kinds of state­ specific information that the caller could use as part its web UI with the user ­­ for example, the list of political parties that user can select for affiliation, or an indication that certain fields are optional for the state, or not collected by the state.</p>

<p>Finally, the API includes the &ldquo;partner_registrations&rdquo; interface to obtain records of past registration transactions. Like the similar UI in the Rocky Partner Portal, access requires authentication, and the records returned are only those pertinent to the authenticated entity.</p>

<h1 id="release-notes">Release Notes</h1>
        
<h2 id="v4">V4</h2>

<p>The registration submission endpoint (/api/v4/registrations and /api/v4/gregistrations) will now return a validation error if the email address submitted is in our block list.</p>

<p>Removed</p>

<ul>
<li><code class="prettyprint">GET /api/v4/registrations</code></li>
<li><code class="prettyprint">GET /api/v4/gregistrations</code></li>
</ul>

<p>We will also deprecate old versions (v1, v2, v3) of these APIs shortly and return only an error message.</p>

  <p>Added</p>
<ul>
<li><code class="prettyprint">POST /api/v4/registrant_reports - create report</code></li>
<li><code class="prettyprint">GET /api/v4/registrant_reports/[ID] - check the status of a particular report and get the download URL</code></li>
<li><code class="prettyprint">GET /api/v4/registrant_reports/[ID]/download - download the contents of a registrant report in CSV format</code></li>
  </ul>
  <ul>
<li><code class="prettyprint">POST /api/v4/gregistrant_reports - create report</code></li>
<li><code class="prettyprint">GET /api/v4/gregistrant_reports/[ID] - check the status of a particular report and get the download URL</code></li>
<li><code class="prettyprint">GET /api/v4/gregistrant_reports/[ID]/download - download the contents of a registrant report in CSV format</code></li>
  </ul>
  
<h2 id="v3">V3</h2>

<p>Added these interfaces:</p>

<ul>
<li><code class="prettyprint">GET /api/v3/registrations/pdf_ready</code></li>
<li><code class="prettyprint">POST /api/v3/registrations/stop_reminders</code></li>
<li><code class="prettyprint">POST /api/v3/registrations/bulk</code></li>
</ul>

<p>In addition: </p>

<ul>
<li>Added parameter for registration and gregistration to indicate async PDF generation or response blocking PDF generation.</li>
<li>Added parameter for custom stop_reminders url. Added UID to the response.</li>
<li>Modified format from <code class="prettyprint">/api/v3/partners/partner.json</code> to <code class="prettyprint">/api/v3/partners/[partner_id].json</code></li>
<li>Added <code class="prettyprint">application/registration/partner</code> CSS urls, <code class="prettyprint">finish_iframe_url</code>, <code class="prettyprint">external_tracking_snippet</code>, <code class="prettyprint">registration_instructions_url</code> to <code class="prettyprint">/api/v3/partners/[partner_id].json</code> response.</li>
<li>Added new fields to match column names for ActiveResource expectations and general standardization.</li>
</ul>

<p>Modified request for:</p>

<ul>
<li><code class="prettyprint">GET /api/v3/partners/[partner_id].json</code></li>
</ul>

<p>to allow for all survey question languages.</p>

<h2 id="v2-2">V2.2</h2>

<p>Added these interfaces:</p>

<ul>
<li><code class="prettyprint">GET /api/v2/partnerpublicprofiles/partner.json</code></li>
<li><code class="prettyprint">GET /api/v2/gregistrationstates.json</code></li>
<li><code class="prettyprint">POST /api/v2/gregistration.json</code></li>
<li><code class="prettyprint">GET /api/v2/gregistrations.json</code></li>
</ul>

<p>Since this addition did not modify the existing API, did not rev from v2 to v3.</p>

<h1 id="status-codes">Status Codes</h1>

<p>All successful requests have response status code 200.</p>

<p>All requests with errors stemming from invalid or missing inputs have status code 400.</p>

<h1 id="response-bodies">Response Bodies</h1>

<p>All response bodies are JSON dictionaries, with the key/value pairs described</p>

<h1 id="interface-definitions">Interface Definitions</h1>

<p>All requests and responses are JSON format. All fields are required unless otherwise specified as optional. All string fields have no length or format restrictions, unless specifically stated. Some field values have specific formats; others have parenthesized notations on field values.</p>

<h2 id="registrations">registrations</h2>

<p>Creates a new registrant record using the input parameter data; and also triggers the side effects of a new record, e.g. sending confirmation email.</p>

<h3 id="registration-fields">Fields</h3>

<p>Most fields are personal information. A few fields merit additional description:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>partner_id</td>
<td>Uniquely identifies a partner organization that uses Rocky as a service for the organization’s members or community. Each transaction is logged by partner_id and every registrant record is tagged by partner_id.</td>
</tr>
<tr>
<td>source_tracking_id</td>
<td>Used to identify the source of a request. For example, in the Web UI, it is typically used as query parameter embedded in a URL in email messages, and identifies the request as part of a particular email campaign. The string value is un­interpreted, however, and may be used for any similar purpose</td>
</tr>
<tr>
<td>partner_tracking_id</td>
<td>Similar to <code class="prettyprint">source_tracking_id</code>, but intended for use for partner­ specific purposes, such as implementing a leader­board, that may require an a tag in addition to the source_tracking_id.</td>
</tr>
<tr>
<td>id_number</td>
<td>Typically a state driver’s license number state ID card number, or social security number; length and format vary by state, as does the explanation of what forms of ID are acceptable. However, id_number is not optional. (Note: it is true that some states’ localities will accept NVRA forms without an ID number, for the special case of people with neither state ID or an SSN. However, since we cannot record precisely how each state handles this special case, we require some ID number, to avoid creating registration requests that may be rejected.)</td>
</tr>
<tr>
<td>email_address</td>
<td>Required by default, even though it is optional for the paper form; however, we need it to contact the user to send them a link to the PDF we generate for them.</td>
</tr>
<tr>
<td>opt_in_email</td>
<td>Determined by the caller, and simply recorded in the registration record created by the call; the caller can determine whether to always obtain the info from the user, or have a default in the case of no user input. Regardless, the opt_in_email field is required to record true or false for opt­ion, regardless of how the caller determined the user’s preference. This field is used to record a user preference for email from RockTheVote.</td>
</tr>
<tr>
<td>opt_in_sms</td>
<td>Required in exactly the same way as <code class="prettyprint">opt_in_email</code></td>
</tr>
<tr>
<td>opt_in_volunteer</td>
<td>Required in exactly the same way as <code class="prettyprint">opt_in_email</code></td>
</tr>
<tr>
<td>partner_opt_in_email, partner_opt_in_sms, partner_opt_in_volunteer</td>
<td>Used in an analogous way to record user preference for communication with the partner organization.</td>
</tr>
<tr>
<td>party</td>
<td>Optional because it is not required on the form; however, the allowable values are state specific.</td>
</tr>
<tr>
<td>callback</td>
<td>Optional parameter that, if present and not empty, changes the return value from JSON format to jsonp; that is, the JSON return value would be a string J, and if the callback parameter’s value is F, then the return value will be F(J);</td>
</tr>
<tr>
<td>custom_stop_reminders_url</td>
<td>Optional URL string that will be used in a link in reminder emails to registrants to cancel any further reminder emails. If the provided URL includes <code class="prettyprint">&lt;UID&gt;</code>, that string will be replaced by the registrant’s UID. If left blank, the default core system stop_reminders URL will be used.</td>
</tr>
<tr>
<td>async</td>
<td>Specifies whether or not the request should return a response immediately (async=false) or wait for a PDF to be generated (async=true)</td>
</tr>
</tbody></table>

<p>Other Notes</p>

<ul>
<li>Some fields are required in some states, optional in others, and not recorded in others; similarly some fields have permitted values that vary by state. State­ specific information is provided by other interfaces in this API.</li>
<li><code class="prettyprint">pdfurl</code> is an out parameter that is the URL of a PDF file containing the voter registration application form with the personal information provided in the request.

<ul>
<li>The URL itself is a large number, large enough to make it very difficult for adversaries to guess URLs, for example https://register.rockthevote.org/pdf/456136972787234.pdf</li>
<li>One intended use is that the caller embed the URL in a link in dynamically generated HTML that is presented to the user.</li>
<li>The URL is returned regardless of whether the PDF is ready for download.</li>
</ul></li>
</ul>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>lang</td>
<td>locale­-compatible string</td>
<td>Required. Options: (en/es, etc)</td>
</tr>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required. Series of digits, no specific length</td>
</tr>
<tr>
<td><small>send_confirmation_reminder_emails</small></td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>collect_email_address</td>
<td>string</td>
<td>Optional. ‘no’ for false</td>
</tr>
<tr>
<td>source_tracking_id</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>partner_tracking_id</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>short_form</td>
<td>boolean</td>
<td>Optional. Default false</td>
</tr>
<tr>
<td>state_ovr_data</td>
<td>string</td>
<td>Optional. Hash, only used for stats and in cases where registrant went through finish­ with­ state steps but ended up finishing with rock the vote)</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>Required. ‘mm­dd­yyyy hh:mm:ss’ (for statistics)</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>Required.  ‘mm­dd­yyyy hh:mm:ss’ (for statistics)</td>
</tr>
<tr>
<td>date_of_birth</td>
<td>date</td>
<td>Required. ‘mm-dd-yyyy’</td>
</tr>
<tr>
<td>id_number</td>
<td>string</td>
<td>Required. Series of alnum, length and format state specific</td>
</tr>
<tr>
<td>email_address</td>
<td>string</td>
<td>Required. RFC syntax</td>
</tr>
<tr>
<td>first_registration</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>home_zip_code</td>
<td>string</td>
<td>Required. ‘zzzzz’ ( 5 digit)</td>
</tr>
<tr>
<td>us_citizen</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>has_state_license</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>is_eighteen_or_older</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>name_title</td>
<td>string</td>
<td>Required. Must be one of &ldquo;Mr.&rdquo;, &ldquo;Mrs.&rdquo;, &ldquo;Miss&rdquo;, &ldquo;Ms.&rdquo;, &ldquo;Sr.&rdquo;, &ldquo;Sra.&rdquo;, &ldquo;Srta.&rdquo;</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>middle_name</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>Required</td>
</tr>
<tr>
<td>name_suffix</td>
<td>string</td>
<td>Optional. Must be one of &ldquo;Jr.&rdquo;, &ldquo;Sr.&rdquo;, &ldquo;II&rdquo;, &ldquo;III&rdquo;, &ldquo;IV&rdquo;</td>
</tr>
<tr>
<td>home_address</td>
<td>string</td>
<td>Required</td>
</tr>
<tr>
<td>home_unit</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>home_city</td>
<td>string</td>
<td>Required</td>
</tr>
<tr>
<td>home_state_id</td>
<td>string(2)</td>
<td>Required</td>
</tr>
<tr>
<td>has_mailing_address</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>mailing_address</td>
<td>string</td>
<td>Req if <code class="prettyprint">has_mailing_address</code></td>
</tr>
<tr>
<td>mailing_unit</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>mailing_city</td>
<td>string</td>
<td>Req if <code class="prettyprint">has_mailing_address</code></td>
</tr>
<tr>
<td>mailing_state_id</td>
<td>string(2)</td>
<td>Req if <code class="prettyprint">has_mailing_address</code></td>
</tr>
<tr>
<td>mailing_zip_code</td>
<td>string</td>
<td>Req if <code class="prettyprint">has_mailing_address</code></td>
</tr>
<tr>
<td>race</td>
<td>string</td>
<td>Required/optional is state­ specific</td>
</tr>
<tr>
<td>party</td>
<td>string</td>
<td>Optional. No validation because allowable choices are state specific</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>phone_type</td>
<td>string</td>
<td>Required if phone number is provided. Must be one of &ldquo;Mobile&rdquo;, &ldquo;Home&rdquo;, &ldquo;Work&rdquo;, &ldquo;Other&rdquo;, &ldquo;Movil&rdquo;, &ldquo;Casa&rdquo;, &ldquo;Trabajo&rdquo;, &ldquo;Otro&rdquo;</td>
</tr>
<tr>
<td>change_of_name</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>prev_name_title</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>prev_first_name</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>prev_middle_name</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>prev_last_name</td>
<td>string</td>
<td>Req if <code class="prettyprint">change_of_name</code></td>
</tr>
<tr>
<td>prev_name_suffix</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>change_of_address</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>prev_address</td>
<td>string</td>
<td>Req if <code class="prettyprint">change_of_address</code></td>
</tr>
<tr>
<td>prev_unit</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>prev_city</td>
<td>string</td>
<td>Req if <code class="prettyprint">change_of_address</code></td>
</tr>
<tr>
<td>prev_state_id</td>
<td>string(2)</td>
<td>Req if <code class="prettyprint">change_of_address</code></td>
</tr>
<tr>
<td>prev_zip_code</td>
<td>string</td>
<td>Req if <code class="prettyprint">change_of_address</code></td>
</tr>
<tr>
<td>opt_in_email</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>opt_in_sms</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>opt_in_volunteer</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>partner_opt_in_email</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>partner_opt_in_sms</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>partner_opt_in_volunteer</td>
<td>boolean</td>
<td>Required</td>
</tr>
<tr>
<td>survey_question_1</td>
<td>string</td>
<td>Req if <code class="prettyprint">survey_answer_1</code> is not blank</td>
</tr>
<tr>
<td>survey_answer_1</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>survey_question_2</td>
<td>string</td>
<td>Req if <code class="prettyprint">survey_answer_2</code> is not blank</td>
</tr>
<tr>
<td>survey_answer_2</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>custom_stop_reminders_url</td>
<td>string</td>
<td>Optional. URL format</td>
</tr>
<tr>
<td>async</td>
<td>boolean</td>
<td>Optional. Default is &ldquo;true&rdquo;</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/v4/registrations.json</code></p>

<p>Post JSON dictionary of fields nested under <code class="prettyprint">registration</code></p>

<h3 id="success-response">Success Response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>pdfurl</td>
<td>string</td>
<td>URL (for the generated PDF)</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>UID string</td>
</tr>
</tbody></table>

<h3 id="registrations-errors">Errors</h3>

<h4 id="validation-error">Validation Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Field where error occurred</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Determined by Rocky, for display by caller, in specified lang</td>
</tr>
</tbody></table>

<h4 id="syntax-error">Syntax Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Invalid parameter type&rdquo;</td>
</tr>
</tbody></table>

<h4 id="unsupported-language">Unsupported language</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="survey-question-error">Survey Question Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
<td>Format: &lsquo;Question N required when Answer N provided&rsquo;</td>
</tr>
</tbody></table>

<h2 id="bulk_registrations">bulk_registrations</h2>

<p>Creates 1­ or multiple incomplete registrant records. Used for creating data in the core Rocky system for statistics, but does not cause emails to be sent or PDFs to be created. Validations are not performed.</p>

<h3 id="bulk-registration-fields">Fields</h3>

<p><a href="#registration-fields">Registration interface definition fields</a>, plus these fields (all required):</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Indicates a step number that the user stopped at</td>
</tr>
<tr>
<td>ineligible_non_participating_state</td>
<td>boolean</td>
<td>Whether the registrant is ineligible due to the state not participating</td>
</tr>
<tr>
<td>ineligible_age</td>
<td>boolean</td>
<td>Whether the registrant is ineligible due to being too young</td>
</tr>
<tr>
<td>ineligible_non_citizen</td>
<td>boolean</td>
<td>Whether the registrant is ineligible due to not being a US citizen</td>
</tr>
<tr>
<td>under_18_ok</td>
<td>boolean</td>
<td>Whether the registrant decided to proceed despite being under 18</td>
</tr>
<tr>
<td>remind_when_18</td>
<td>boolean</td>
<td>Whether the registrant requested a reminder when 18</td>
</tr>
<tr>
<td>age</td>
<td>integer</td>
<td>Age of registrant</td>
</tr>
<tr>
<td>javascript_disabled</td>
<td>boolean</td>
<td>Whether the user had javascript disabled</td>
</tr>
<tr>
<td>using_state_online_registration</td>
<td>boolean</td>
<td>Whether the user selected to use the state online reg system</td>
</tr>
<tr>
<td>finish_with_state</td>
<td>boolean</td>
<td>Whether the user is in a &ldquo;finish_with_state&rdquo; flow</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/v4/registrations/bulk</code></p>

<p>Body is JSON list of <code class="prettyprint">registration</code> dictionaries combining <a href="#bulk-registration-fields">bulk</a> and <a href="#registration-fields">normal</a> registration fields</p>

<h3 id="success">Success</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>abandoned_registrations</td>
<td>integer</td>
<td>Number of records written</td>
</tr>
</tbody></table>

<h3 id="error-response">Error Response</h3>

<p>If any registrations can&rsquo;t be saved, status code 400 is returned, with a JSON list of responses for each record that is either an empty hash (<code class="prettyprint">{}</code>) if there are no errors for that user, or a dictionary with <code class="prettyprint">type</code>, <code class="prettyprint">field_name</code> and <code class="prettyprint">message</code> if there is an error</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>ValidationError, SyntaxError, UnsupportedLanguageError</td>
</tr>
<tr>
<td>field_name</td>
<td>string</td>
<td>Field where error occurred</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Determined by Rocky, for display by caller, in specified lang</td>
</tr>
</tbody></table>

<h2 id="gregistrations">gregistrations</h2>

<p>Creates a new registrant record using the input parameter data, for the use case where the user was eligible to finish their registration on a government operated state­ specific web site, chose to be re­directed there, and did not return ­­ presumably because they finished registration on the state’s site.</p>

<p>Differs from registrations only in the following ways:</p>

<ul>
<li>Only the following parameters are required

<ul>
<li>lang</li>
<li>partner_id</li>
<li>send_confirmation_reminder_emails</li>
<li>date_of_birth</li>
<li>email_address</li>
<li>home_zip_code</li>
<li>us_citizen</li>
<li>name_title</li>
<li>last_name</li>
</ul></li>
<li>If <code class="prettyprint">send_confirmation_reminder_emails</code> is true, then the emails sent are the the emails that are pertinent to this use case, rather than the standard use case of completing a registration using the Rocky UI</li>
<li>The PDF is not generated, and therefore the <code class="prettyprint">async</code> parameter has no effect</li>
<li>Success has no output parameters</li>
<li>There is an additional error return code</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/v4/gregistrations.json</code></p>

<p>Post a JSON object with key <code class="prettyprint">registration</code> and value of a registration object</p>

<h3 id="success">Success</h3>

<p>No body</p>

<h3 id="errors">Errors</h3>

<h4 id="unsupported-state">Unsupported state</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<p>See <a href="#registrations-errors">registrations interface definition errors</a> for other return data definitions.</p>

<h2 id="bulk_gregistrations">bulk_gregistrations</h2>

<p>Same as gregistrations but expects an array of registrant records and returns the number of records created.</p>

<h3 id="fields">Fields</h3>

<p><a href="#registration-fields">Registration interface definition fields</a>, plus these fields (all required):</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>Indicates a step number that the user stopped at</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>UTC datetime format</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>UTC datetime format</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/v4/bulk_gregistrations.json</code></p>

<p>Body is JSON dictionary with a single key, <code class="prettyprint">bulk_gregistrations</code>, and value as a list of bulk registration dictionaries, as described above.</p>

<h3 id="success-response">Success Response</h3>

<p>Body is a dictionary with key <code class="prettyprint">bulk_gregistrations</code>, and the value is an integer with the number of records written, which should be the number of registrations posted.</p>

<h3 id="error">Error</h3>

<p>If any registrations have an error, a status code 400 is returned, with a JSON list of responses for each record that is either an empty hash ({}) if there are no errors for that user, or a dictionary with <code class="prettyprint">type</code>, <code class="prettyprint">field_name</code> and <code class="prettyprint">message</code> if there is an error</p>

<h2 id="gregistrationstates">gregistrationstates</h2>

<p>Returns a list of state for which Rocky current supports per­-state integration with states. There are no input parameters. State return data is the 2 letter code for the state, and the URL to use to send registrant data to the state’s web site.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/v4/gregistrationstates.json</code></p>

<h3 id="response">Response</h3>

<p>Returns status code 200, with both of a dictionary with one key, <code class="prettyprint">states</code>, which is a list of dictionaries with two keys: <code class="prettyprint">name</code> which is the 2 letter state code, and <code class="prettyprint">url</code> which is a string URL.</p>

<h2 id="state_requirements">state_requirements</h2>

<p>Checks state eligibility and provides state­ specific fields information</p>

<p>Most input fields are personal information; most output fields are indicated as state specific. A few fields merit additional description:</p>

<ul>
<li>For input, one of <code class="prettyprint">home_state_id</code> and <code class="prettyprint">home_zip_code</code> is required. If both are provided, they must match. Really only one is needed.</li>
<li>Fields named <code class="prettyprint">&lt;foo&gt;_msg</code> contain a string with state­ specific information that explains the state­ specific situation of <code class="prettyprint">&lt;foo&gt;</code>, such as what the requirements are for reporting race, or stating party affiliation, or why the state does not allow party affiliation, or what the state’s rules are about ID numbers for voter registration, or for minimum age for filing a voter registration application.</li>
<li>Fields named <code class="prettyprint">sos_&lt;foo&gt;</code> refer to the contract information for the office of Secretary of State for the state specified in the <code class="prettyprint">home_state_id</code> input field</li>
<li>Invalid state error is for a <code class="prettyprint">home_state_id</code> input field value that is not a state, e.g. AJ</li>
<li>Non-participating state error is for a correct state id, but for a state that does not participate in mail­in NVRA­ form registration; the explanatory msg is state­ specific</li>
<li>To validate the age, make sure the person is 18+ yo and return localized error message if she’s not</li>
<li><code class="prettyprint">no_party_msg</code> is the name of the last option for party affiliation; in some states it is &ldquo;none&rdquo; while in others it is &ldquo;decline to state&rdquo; and over time any state can change its preferences</li>
<li><code class="prettyprint">requires_party_msg</code> explains the state’s rules for whether an application must or may include a party affiliation selection</li>
<li><code class="prettyprint">callback</code> is an optional string parameter, exactly as described above</li>
</ul>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/v4/state_requirements.json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>lang</td>
<td>string</td>
<td>Required. Locale­ compatible string (en/es, etc)</td>
</tr>
<tr>
<td>home_state_id</td>
<td>string</td>
<td>Required. 2-character state abbreviation</td>
</tr>
<tr>
<td>home_zip_code</td>
<td>string</td>
<td>Required. ‘zzzzz’ 5 digit zip code</td>
</tr>
<tr>
<td>date_of_birth</td>
<td>string</td>
<td>Optional. ‘mm-dd-yyyy’</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional.</td>
</tr>
</tbody></table>

<h3 id="success-response">Success response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>requires_race</td>
<td>boolean</td>
</tr>
<tr>
<td>requires_race_msg</td>
<td>string</td>
</tr>
<tr>
<td>requires_party</td>
<td>boolean</td>
</tr>
<tr>
<td>requires_party_msg</td>
<td>string</td>
</tr>
<tr>
<td>no_party</td>
<td>boolean</td>
</tr>
<tr>
<td>no_party_msg</td>
<td>string</td>
</tr>
<tr>
<td>party_list</td>
<td>list of strings</td>
</tr>
<tr>
<td>id_length_min</td>
<td>integer</td>
</tr>
<tr>
<td>id_length_max</td>
<td>integer</td>
</tr>
<tr>
<td>id_number_msg</td>
<td>string</td>
</tr>
<tr>
<td>sos_address</td>
<td>string</td>
</tr>
<tr>
<td>sos_phone</td>
<td>string</td>
</tr>
<tr>
<td>sos_url</td>
<td>string</td>
</tr>
<tr>
<td>sub_18_msg</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="errors">Errors</h3>

<h4 id="invalid-state-id">Invalid state ID</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="invalid-zip-code">Invalid ZIP code</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="incorrect-zip-code-zip-does-not-match-state">Incorrect ZIP code ( ZIP does not match state)</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="non-participating-state">Non­participating state</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
<td>State specific</td>
</tr>
</tbody></table>

<h4 id="invalid-age">Invalid age</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
<td>State specific</td>
</tr>
</tbody></table>

<h4 id="unsupported-language">Unsupported language</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="syntax-error">Syntax Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
</tbody></table>

<h2 id="pdf_ready">pdf_ready</h2>

<p>For a given registration UID, returns true or false to indicate whether the PDF for that registrant exists.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/v4/registrations/pdf_read</code></p>

<p>Returns status of PDF generation for the given registrant</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>UID</td>
<td>string</td>
<td>Required.</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional.</td>
</tr>
</tbody></table>

<h3 id="success-response">Success Response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>pdf_ready</td>
<td>boolean</td>
</tr>
<tr>
<td>UID</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="errors">Errors</h3>

<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="not-found-uid">Not Found UID</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Value: &ldquo;UID&rdquo;</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Registrant not found&rdquo;</td>
</tr>
</tbody></table>

<h4 id="syntax-error">Syntax Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Invalid parameter type&rdquo;</td>
</tr>
</tbody></table>

<h2 id="stop_reminders">stop_reminders</h2>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/v4/registrations/stop_reminders</code></p>

<p>For a given registration <code class="prettyprint">UID</code> sets <code class="prettyprint">reminders_left</code> to 0 to prevent further reminder emails.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required. Series of digits, no specific length.</td>
</tr>
<tr>
<td>partner_API_key</td>
<td>string</td>
<td>Required. No specific length.</td>
</tr>
<tr>
<td>UID</td>
<td>string</td>
<td>Required.</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional.</td>
</tr>
</tbody></table>

<h3 id="success">Success</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>UID</td>
<td>string</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
</tr>
<tr>
<td>email_address</td>
<td>string</td>
</tr>
<tr>
<td>reminders_stopped</td>
<td>boolean</td>
</tr>
</tbody></table>

<h3 id="errors">Errors</h3>

<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="not-found-uid">Not Found UID</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Value: &ldquo;UID&rdquo;</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Registrant not found&rdquo;</td>
</tr>
</tbody></table>

<h4 id="syntax-error">Syntax Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Invalid parameter type&rdquo;</td>
</tr>
</tbody></table>

<!--new reporting-->
<h2 id="reports">reports</h2>

<P>For a given partner, checks partner_id (ID in the "partners" table) and corresponding API key, and starts generation of partner­-specific registration records. Partner account was created using Rocky web UI; API key was set then, and can be reset later via admin UI. Optional "email" parameter filters the partner’s registration records, to return only those with an email address that matches the address provided in the parameter. Optional "since" parameter limits returned records to those created after the date­time provided as parameter value; the records include those that were started but not completed, and a noted via the "status" out parameter. The callback parameter is an optional string parameter, exactly as described above.</p>

        <h3 id="http-request">HTTP Request</h3>
<p><code class="prettyprint">POST /api/v4/registrant_reports.json</code></p>
<p>Returns report record with ID and URL for checking report status</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required, series of digits, no specific length</td>
</tr>
<tr>
<td>partner_API_key</td>
<td>string</td>
<td>Required, no specific length</td>
</tr>
<tr>
<td>since</td>
<td>string</td>
<td>Optional, UTC datetime format</td>
</tr>
<tr>
<td>before</td>
<td>string</td>
<td>Optional, UTC datetime format</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Optional, email name at domain format</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>report_type</td>
<td>string</td>
<td>Optional. Currently the only valid value is "extended". Used to indicate an alternate CSV format with added fields.</td>
</tr>
</tbody>
</table>
        
<h3 id="success-response">Success Response</h3>
        
<p>JSON dictionary with details about the report generation</p>
        
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>string</td>
<td>"queued", or other current report status</td>
</tr>
<tr>
<td>report_id</td>
<td>integer</td>
<td>e.g. 17</td>
</tr>
<tr>
<td>record_count</td>
<td>integer</td>
<td>e.g. 2314 total number of records being generated by this report</td>
</tr>
<tr>
<td>current_index</td>
<td>integer</td>
<td>e.g. 100 current index of being processed by the report</td>
</tr>
<tr>
<td>status_url</td>
<td>string</td>
<td>e.g. "https://register.rockthevote.com/api/v4/registrant_reports/17"</td>
</tr>
<tr>
<td>download_url</td>
<td>string</td>
<td>may be empty if not complete</td>
</tr>
</tbody>
</table>
        
<h2 id="report_status">report status</h2>
        
<p>For a given partner, checks <code>partner_id</code> (ID in the "partners" table) and corresponding API key, and returns status of previously queued report.</p>

        <h3 id="http-request">HTTP Request</h3>
<p><code class="prettyprint">GET /api/v4/registrant_reports/[ID].json</code></p>
<p>Returns report record with ID and URL for checking report status</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required, series of digits, no specific length</td>
</tr>
<tr>
<td>partner_API_key</td>
<td>string</td>
<td>Required, no specific length</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional</td>
</tr>
</tbody>
</table>
        
<h3 id="success-response">Success Response</h3>
<p>JSON dictionary with details about the report generation</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>string</td>
<td>"queued", or other current report status</td>
</tr>
<tr>
<td>report_id</td>
<td>integer</td>
<td>e.g. 17</td>
</tr>
<tr>
<td>record_count</td>
<td>integer</td>
<td>e.g. 2314 total number of records being generated by this report</td>
</tr>
<tr>
<td>current_index</td>
<td>integer</td>
<td>e.g. 100 current index of being processed by the report</td>
</tr>
<tr>
<td>status_url</td>
<td>string</td>
<td>e.g. "https://register.rockthevote.com/api/v4/registrant_reports/17"</td>
</tr>
<tr>
<td>download_url</td>
<td>string</td>
<td>may be empty if not complete. e.g. "https://register.rockthevote.com/api/v4/registrant_reports/17/download"</td>
</tr>
</tbody>
</table>
        
<h3 id="error-responses">Error Responses</h3>
        
<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>  
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody>
</table>
        
<h4 id="syntax-error">Syntax Error</h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: "Invalid parameter type"</td>
</tr>
</tbody>
</table>
        
        
<h2 id="gregistrant_reports">gregistrant_reports</h2>
        
<p>For a given gpartner ­­— a government partner such as a local elections office ­­— checks partner_id (ID in the "partners" table) and corresponding API key, and initializes a report generation of partner­specific registration records. Partner account was created by the Rocky admin; API key was set then, and can be reset later by the Rocky admin. The record returned are those records for which the registrant’s ZIP code is one of the ZIP codes associated with the partner_id ­­ ZIP codes that were set by Rocky admin during creation, and can be updated.</p>
<p>Optional "email" parameter filters the partner’s registration records, to return only those with an email address that matches the address provided in the parameter. Optional "since" parameter limits returned records to those c reated after the date­time provided as parameter value; the records include those that were started but not completed, and a noted via the "status" out parameter. The callback parameter is an optional string parameter, exactly as described above.</p>
<h3 id="http-request">HTTP Request</h3>
<p><code class="prettyprint">POST /api/v4/gregistrant_reports.json</code></p>
<p>Returns registration records associated with the given government partner</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpartner_id</td>
<td>string</td>
<td>Series of digits, no specific length</td>
</tr>
<tr>
<td>gpartner_API_key</td>
<td>string</td>
<td>No specific length</td>
</tr>
<tr>
<td>since</td>
<td>string</td>
<td>Optional, UTC datetime format</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Optional, email name at domain format</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>report_type</td>
<td>string</td>
<td>Optional. Currently the only valid value is "extended". Used to indicate an alternate CSV format with added fields.</td>
</tr>
</tbody>
</table>
     
<h3 id="success-response">Success Response</h3>
        <p>JSON dictionary with details about the report generation</p>
  
        <table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>string</td>
<td>"queued", or other current report status</td>
</tr>
<tr>
<td>report_id</td>
<td>integer</td>
<td>e.g. 17</td>
</tr>
<tr>
<td>record_count</td>
<td>integer</td>
<td>e.g. 2314 total number of records being generated by this report</td>
</tr>
<tr>
<td>current_index</td>
<td>integer</td>
<td>e.g. 100 current index of being processed by the report</td>
</tr>
<tr>
<td>status_url</td>
<td>string</td>
<td>e.g. "https://register.rockthevote.com/api/v4/gregistrant_reports/17"</td>
</tr>
<tr>
<td>download_url</td>
<td>string</td>
<td>may be empty if not complete. e.g. "https://register.rockthevote.com/api/v4/gregistrant_reports/17/download"</td>
</tr>
</tbody>
</table>
<h3 id="error-responses">Error Responses</h3>

<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody>
</table>
<h4 id="invalid-since">Invalid since</h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Value: "since"</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: "Invalid parameter value"</td>
</tr>
</tbody>
</table>
<h4 id="syntax-error">Syntax Error</h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: "Invalid parameter type"</td>
</tr>
</tbody>
</table>        
        
        
        
<h2 id="greport_status">greport status</h2>
        
<p>For a given partner, checks <code>gpartner_id</code> (ID in the "partners" table) and corresponding API key, and returns status of previously queued report.</p>

        <h3 id="http-request">HTTP Request</h3>
<p><code class="prettyprint">GET /api/v4/gregistrant_reports/[ID].json</code></p>
<p>Returns report record with ID and URL for checking report status</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpartner_id</td>
<td>string</td>
<td>Required, series of digits, no specific length</td>
</tr>
<tr>
<td>gpartner_API_key</td>
<td>string</td>
<td>Required, no specific length</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional</td>
</tr>
</tbody>
</table>
        
<h3 id="success-response">Success Response</h3>
<p>JSON dictionary with details about the report generation</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>string</td>
<td>"queued", or other current report status</td>
</tr>
<tr>
<td>report_id</td>
<td>integer</td>
<td>e.g. 17</td>
</tr>
<tr>
<td>record_count</td>
<td>integer</td>
<td>e.g. 2314 total number of records being generated by this report</td>
</tr>
<tr>
<td>current_index</td>
<td>integer</td>
<td>e.g. 100 current index of being processed by the report</td>
</tr>
<tr>
<td>status_url</td>
<td>string</td>
<td>e.g. "https://register.rockthevote.com/api/v4/gregistrant_reports/17"</td>
</tr>
<tr>
<td>download_url</td>
<td>string</td>
<td>may be empty if not complete. e.g. "https://register.rockthevote.com/api/v4/gregistrant_reports/17/download"</td>
</tr>
</tbody>
</table>
        
<h3 id="error-responses">Error Responses</h3>
        
<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>  
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody>
</table>
        
<h4 id="syntax-error">Syntax Error</h4>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: "Invalid parameter type"</td>
</tr>
</tbody>
</table>
<!--end new reporting-->      
        
        
        
        

<h2 id="partners">partners</h2>
<p>Creates a new partner, very similar to partner creation in the Web UI of the partner portal.</p>
<h3 id="http-request">HTTP Request</h3>
<p><code class="prettyprint">POST /api/v4/partners.json</code></p>
<p>Post JSON dictionary of fields nested under <code class="prettyprint">partner</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>org_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>org_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>org_privacy_url</td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td>contact_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_email</td>
<td>string</td>
<td>Email address format</td>
</tr>
<tr>
<td>contact_phone</td>
<td>string</td>
<td>&#39;nnn­nnn­nnnn&rsquo; format</td>
</tr>
<tr>
<td>contact_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_state</td>
<td>string</td>
<td>2 letter state code)</td>
</tr>
<tr>
<td>contact_ZIP</td>
<td>string</td>
<td>5 digits, &#39;nnnnn&rsquo;</td>
</tr>
<tr>
<td>logo_image_URL</td>
<td>string</td>
<td>URL format)</td>
</tr>
<tr>
<td>survey_question_1_[locale]</td>
<td>string</td>
<td>Where [locale] may be any of the enabled locale codes</td>
</tr>
<tr>
<td>survey_question_2_[locale]</td>
<td>string</td>
<td>Where [locale] may be any of the enabled locale codes</td>
</tr>
<tr>
<td>partner_ask_volunteer</td>
<td>boolean</td>
<td></td>
</tr>
</tbody></table>

<h3 id="success-response">Success Response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Series of digits</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error Responses</h3>

<h4 id="syntax-error">Syntax Error</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>field_name</td>
<td>string</td>
<td>Name of field that is not defined for this request</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Value: &ldquo;Invalid parameter type&rdquo;</td>
</tr>
</tbody></table>

<h3 id="partner">partner</h3>

<p>For a given partner, checks partner_id (ID in the &ldquo;partners&rdquo; table) and corresponding API key, and returns partner­specific profile records. Partner profile was created using Rocky web UI or API call POST partners. The callback parameter is an optional string parameter, exactly as described above.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/v4/partners/[partner_id].json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required. Series of digits, no specific length.</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional.</td>
</tr>
</tbody></table>

<h3 id="success-response">Success Response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>org_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>org_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>org_privacy_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>contact_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_email</td>
<td>string</td>
<td>Email address format</td>
</tr>
<tr>
<td>contact_phone</td>
<td>string</td>
<td>nnn­nnn­nnnn format</td>
</tr>
<tr>
<td>contact_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact_state</td>
<td>string</td>
<td>2 letter state code</td>
</tr>
<tr>
<td>contact_ZIP</td>
<td>string</td>
<td>nnnnn format</td>
</tr>
<tr>
<td>logo_image_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>application_css_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>registration_css_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>parnter_css_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>finish_iframe_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>survey_question_1_[locale]</td>
<td>string</td>
<td>Where [locale] may be any enabled locale</td>
</tr>
<tr>
<td>survey_question_2_[locale]</td>
<td>string</td>
<td>Where [locale] may be any enabled locale</td>
</tr>
<tr>
<td>whitelabeled</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_ask_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_ask_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>ask_for_volunteers</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_for_volunteers</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>external_tracking_snippet</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>registration_instructions_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>application_css_present</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>application_css_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>registration_css_present</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>registration_css_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>partner_css_present</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_css_url</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>primary</td>
<td>boolean</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-response">Error Response</h3>

<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

<h2 id="partner">partner</h2>

<p>For a given partner, checks partner_id (ID in the &ldquo;partners&rdquo; table) and corresponding API key, without an API key, and returns the portion of partner­specific profile records that are not private. Intended for unauthenticated access to public information.</p>

<p>Partner profile was created using Rocky web UI or API call POST partners. The callback parameter is an optional string parameter, exactly as described above.</p>

<p>In addition to the return field names above, there are return fields that are aliases for the above, provided for internal use with Rocky. Though present in return data, the alias fields can be ignored by most callers. They are:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Alias</th>
</tr>
</thead><tbody>
<tr>
<td>organization</td>
<td>org_name</td>
</tr>
<tr>
<td>url</td>
<td>org_URL</td>
</tr>
<tr>
<td>privacy_url</td>
<td>org_privacy_url</td>
</tr>
<tr>
<td>name</td>
<td>contact_name</td>
</tr>
<tr>
<td>email</td>
<td>contact_email</td>
</tr>
<tr>
<td>phone</td>
<td>contact_phone</td>
</tr>
<tr>
<td>address</td>
<td>contact_address</td>
</tr>
<tr>
<td>city</td>
<td>contact_city</td>
</tr>
<tr>
<td>state_abbrev</td>
<td>contact_state</td>
</tr>
<tr>
<td>zip_code</td>
<td>contact_ZIP</td>
</tr>
<tr>
<td>rtv_email_opt_in</td>
<td>rtv_ask_email_opt_in</td>
</tr>
<tr>
<td>partner_email_opt_in</td>
<td>partner_ask_email_opt_in</td>
</tr>
<tr>
<td>rtv_sms_opt_in</td>
<td>rtv_ask_email_opt_in</td>
</tr>
<tr>
<td>partner_sms_opt_in</td>
<td>partner_ask_sms_opt_in</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/v4/partnerpublicprofiles/[partner_id].json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>partner_id</td>
<td>string</td>
<td>Required. Series of digits, no specific length.</td>
</tr>
<tr>
<td>callback</td>
<td>string</td>
<td>Optional.</td>
</tr>
</tbody></table>

<h3 id="success-response">Success Response</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
<th>Notes</th>
</tr>
</thead><tbody>
<tr>
<td>org_name</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>org_URL</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>org_privacy_url</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>logo_image_URL</td>
<td>string</td>
<td>URL format</td>
</tr>
<tr>
<td>survey_question_1</td>
<td>{hash}</td>
<td></td>
</tr>
<tr>
<td>survey_question_2</td>
<td>{hash}</td>
<td></td>
</tr>
<tr>
<td>whitelabeled</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_ask_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_email_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_ask_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_sms_opt_in</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>rtv_ask_volunteer</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>partner_ask_volunteer</td>
<td>boolean</td>
<td></td>
</tr>
</tbody></table>

<p>In addition to the return field names above, there are return fields that are aliases for the above, provided for internal use with Rocky. Though present in return data, the alias fields can be ignored by most callers. They are:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Alias</th>
</tr>
</thead><tbody>
<tr>
<td>organization</td>
<td>org_name</td>
</tr>
<tr>
<td>url</td>
<td>org_URL</td>
</tr>
<tr>
<td>privacy_url</td>
<td>org_privacy_url</td>
</tr>
<tr>
<td>rtv_email_opt_in</td>
<td>rtv_ask_email_opt_in</td>
</tr>
<tr>
<td>partner_email_opt_in</td>
<td>partner_ask_email_opt_in</td>
</tr>
<tr>
<td>rtv_sms_opt_in</td>
<td>rtv_ask_email_opt_in</td>
</tr>
<tr>
<td>partner_sms_opt_in</td>
<td>partner_ask_sms_opt_in</td>
</tr>
</tbody></table>

<h3 id="error-response">Error Response</h3>

<h4 id="invalid-partner-or-api-key">Invalid Partner or API key</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value Type</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>string</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>
  </body>
</html>
